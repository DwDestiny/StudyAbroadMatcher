# 特征工程方案

## 项目背景
基于留学申请历史数据，构建特征工程体系，为用户提供院校专业匹配度、申请成功率预测等数据支撑。

## 数据现状分析

### 原始数据特点
- 数据规模：72,395条有效记录
- 申请集中度：前10所大学占67.4%申请量
- 语言成绩稀缺：仅6.8%有语言成绩
- 工作经验不足：88.2%学生无工作经验
- GPA数据问题：存在异常值需要修复

### 数据质量问题
1. **GPA转换异常**：最大值1,111,111，需要重新修复转换逻辑
2. **专业名称不规范**：存在大小写不一致、命名不统一问题
3. **院校名称标准化**：需要统一不同写法的同一院校

## 特征工程策略

### 1. 院校层次特征 (University Tier Features)

#### 1.1 海外院校层次
**数据源**: QS世界大学排名 + 申请频次数据
**分层策略**:
- **T1 (Top Tier)**: QS排名1-50 或 申请量>10,000
- **T2 (High Tier)**: QS排名51-100 或 申请量5,000-10,000
- **T3 (Mid Tier)**: QS排名101-300 或 申请量1,000-5,000
- **T4 (Regular Tier)**: QS排名300+ 或 申请量<1,000

**输出特征**:
- `target_university_tier`: 目标院校层次 (1-4)
- `target_university_qs_rank`: QS排名分数
- `target_university_application_volume`: 申请热度分数

#### 1.2 中国院校层次  
**数据源**: 中国院校层次文件（3,106所院校）
**分层策略**:
- **C1**: 985院校
- **C2**: 211院校（非985）
- **C3**: 双一流院校
- **C4**: 本科院校
- **C5**: 专科院校

**输出特征**:
- `source_university_tier`: 毕业院校层次 (1-5)
- `is_985`: 是否985院校 (0/1)
- `is_211`: 是否211院校 (0/1)
- `is_double_first_class`: 是否双一流 (0/1)

### 2. 专业匹配度特征 (Major Matching Features)

#### 2.1 专业分类体系
**一级分类**:
- 商科 (Business): Finance, Accounting, Economics, Management, Marketing
- 工科 (Engineering): Computer Science, Software Engineering, Electrical Engineering  
- 理科 (Science): Mathematics, Physics, Chemistry, Biology
- 文科 (Liberal Arts): English, Journalism, Education, Psychology
- 法学 (Law): Law, Legal Studies
- 艺术 (Arts): Design, Media, Fine Arts
- 医学 (Medicine): Medicine, Nursing, Public Health

#### 2.2 匹配度计算规则
**完全匹配 (1.0)**:
- 同一专业不同层次: Finance → Master of Finance
- 直接对应关系: Computer Science → Master of Computer Science

**高度相关 (0.8)**:
- 同领域细分专业: Finance → Master of Commerce
- 技术相关: Computer Science → Master of Information Technology

**相关匹配 (0.6)**:
- 同一级分类内: Economics → Master of Finance
- 跨学科但相关: Engineering → Master of Project Management

**合理跨领域 (0.4)**:
- 通用性强的目标专业: Any → MBA, Master of Education
- 基础学科到应用: Mathematics → Master of Data Science

**完全跨领域 (0.2)**:
- 不相关专业转换: Art → Master of Computer Science

**输出特征**:
- `major_matching_score`: 专业匹配度分数 (0.2-1.0)
- `is_same_field`: 是否同领域 (0/1)
- `source_major_category`: 本科专业类别
- `target_major_category`: 目标专业类别

### 3. 学术实力综合特征 (Academic Strength Features)

#### 3.1 GPA标准化修复
**修复策略**:
- 异常值处理: >100的值重新检查原始格式
- 分制识别优化: 改进4.0制、5.0制、百分制识别逻辑
- 边界值处理: <0 或 >100 的异常值

#### 3.2 学术实力评分
**计算公式**:
```
Academic_Strength = (GPA_Score * 0.6) + (University_Tier_Score * 0.3) + (Degree_Level_Score * 0.1)
```

**权重分配**:
- GPA分数（60%）: 标准化后的GPA百分制
- 院校背景（30%）: C1=100, C2=85, C3=70, C4=60, C5=50
- 学历层次（10%）: 博士=100, 硕士=85, 本科=70, 专科=50

**输出特征**:
- `gpa_percentile`: GPA百分位数
- `academic_strength_score`: 综合学术实力评分 (0-100)
- `source_degree_level_score`: 学历层次分数

### 4. 语言能力特征 (Language Proficiency Features)

#### 4.1 语言成绩标准化
**等效转换表**:
| IELTS | TOEFL iBT | PTE Academic | 标准分 |
|-------|-----------|--------------|--------|
| 9.0   | 118-120   | 86-90        | 100    |
| 8.5   | 115-117   | 83-85        | 95     |
| 8.0   | 110-114   | 79-82        | 90     |
| 7.5   | 102-109   | 73-78        | 85     |
| 7.0   | 94-101    | 65-72        | 80     |
| 6.5   | 79-93     | 58-64        | 75     |
| 6.0   | 60-78     | 50-57        | 70     |
| 5.5   | 46-59     | 43-49        | 65     |

**输出特征**:
- `language_standard_score`: 标准化语言分数 (0-100)
- `has_language_score`: 是否有语言成绩 (0/1)
- `language_test_type`: 语言考试类型

### 5. 工作经验特征 (Work Experience Features)

#### 5.1 工作经验量化
**经验分类**:
- 无工作经验: 0分
- 实习经验: 按月计算，每月1分，最高12分
- 全职经验: 按月计算，每月2分，最高48分

**行业相关性**:
- 高度相关: 金融专业申请者在银行工作 (1.0)
- 相关: IT专业申请者在科技公司 (0.8)
- 一般相关: 商科申请者在任何公司 (0.6)
- 不相关: 跨行业经验 (0.4)
- 教学/研究经验: 学术申请加分 (0.8)

**输出特征**:
- `work_experience_months`: 工作经验月数
- `work_experience_score`: 工作经验评分 (0-48)
- `work_relevance_score`: 工作相关性评分 (0-1.0)
- `has_work_experience`: 是否有工作经验 (0/1)

### 6. 申请竞争度特征 (Application Competition Features)

#### 6.1 竞争度计算
**竞争指数公式**:
```
Competition_Index = log(Application_Count) + University_Tier_Weight + Major_Popularity_Weight
```

**热门组合识别**:
- 超热门: 悉尼大学商科类专业
- 热门: Top5大学主流专业
- 中等: Top10大学一般专业
- 冷门: 其他组合

**输出特征**:
- `competition_index`: 申请竞争指数 (1-10)
- `application_popularity`: 申请热门度分级
- `success_rate_estimation`: 基于历史数据的成功率估计

### 7. 时间序列特征 (Temporal Features)

#### 7.1 时间相关特征
**教育时间线**:
- 教育持续时间: 毕业时间 - 入学时间
- 毕业到申请间隔: 申请时间 - 毕业时间
- 语言考试时效性: 申请时间 - 语言考试时间

**申请时间趋势**:
- 申请年份
- 申请季度
- 是否黄金申请期

**输出特征**:
- `education_duration_months`: 教育持续月数
- `gap_months`: 毕业到申请间隔月数
- `language_test_freshness`: 语言考试时效性 (月)
- `application_season`: 申请季节

### 8. 衍生特征 (Derived Features)

#### 8.1 综合竞争力评分
```
Overall_Competitiveness = Academic_Strength * 0.35 + 
                         Major_Matching * 0.25 + 
                         Language_Score * 0.20 + 
                         Work_Experience * 0.15 + 
                         University_Background * 0.05
```

#### 8.2 申请成功概率预测特征
- 历史相似案例匹配度
- 申请难度与个人实力差距
- 综合风险评估分数

## 实施计划

### 阶段1: 基础修复 (1-2天)
1. 修复GPA转换异常值问题
2. 获取QS排名数据
3. 标准化院校和专业名称

### 阶段2: 核心特征构造 (3-4天)  
1. 构造院校层次特征
2. 构造专业匹配度特征
3. 构造学术实力特征

### 阶段3: 补充特征 (2-3天)
1. 语言能力特征标准化
2. 工作经验量化
3. 申请竞争度分析

### 阶段4: 高级特征 (2-3天)
1. 时间序列特征
2. 综合评分特征
3. 特征有效性验证

### 阶段5: 验证与优化 (1-2天)
1. 特征相关性分析
2. 特征重要性评估
3. 特征工程效果验证

## 预期输出

### 特征矩阵
- 原始特征: 23个
- 构造特征: 30-35个
- 总特征数: 50-60个

### 特征分类
- 院校特征: 8个
- 专业特征: 6个  
- 学术特征: 5个
- 语言特征: 4个
- 工作特征: 4个
- 竞争特征: 4个
- 时间特征: 4个
- 综合特征: 3个

## 质量保证

### 数据验证
- 特征值范围检查
- 缺失值处理验证
- 异常值检测

### 业务逻辑验证  
- 特征与业务逻辑一致性
- 专业匹配规则合理性
- 权重分配合理性