# 院校背景统一量化评分特征工程总结

## 项目概述

基于改进院校分类器，成功实现了院校背景统一量化评分特征生成系统。该系统将中国院校层次和海外院校QS排名统一转换为0-100分的量化评分，为留学申请数据分析提供了标准化的院校背景评估体系。

## 实现功能

### 1. 核心功能模块

#### 1.1 中国院校评分系统
- **评分规则**：遵循CLAUDE.md定义的分层体系
  - C1级（985院校）：85-100分，加权平均 92.5分 + 985加分5分 = 97.5分
  - C2级（211院校）：75-85分，加权平均 80分 + 211加分3分 = 83分
  - C2.5级（特色顶尖院校）：75-90分，加权平均 82.5分
  - C3级（双一流/省重点）：65-75分，加权平均 70分 + 双一流加分2分 = 72分
  - C4级（普通本科）：55-65分，加权平均 60分
  - C5级（专科）：40-55分，加权平均 47.5分

#### 1.2 海外院校QS排名评分系统
- **QS排名区间评分**：
  - Top 50 (1-50名)：90-100分，线性插值
  - 51-100名：80-90分
  - 101-200名：70-80分
  - 201-300名：60-70分
  - 301-500名：50-60分
  - 501-1000名：40-50分
  - 1000名以后：30-40分
  - 无排名院校：默认45分

#### 1.3 院校类别分类系统
- **四大类别**：
  - **艺术类**：艺术、美术、音乐、戏剧、影视等关键词
  - **体育类**：体育、运动、体院等关键词
  - **专业类**：理工、财经、医科、师范、农业等关键词
  - **综合类**：默认分类，包含大学、学院等通用名称

### 2. 生成特征

#### 2.1 核心评分特征
- `source_university_score_unified`：生源院校统一评分（0-100分）
- `target_university_score_unified`：目标院校统一评分（0-100分）
- `university_score_gap_unified`：院校评分差距
- `university_score_improvement_ratio`：相对提升比例

#### 2.2 院校类别特征
- `source_university_category`：生源院校类别
- `target_university_category`：目标院校类别

## 数据统计分析

### 3.1 生源院校评分分布
- **平均分**：61.82分
- **中位数**：60.00分
- **标准差**：7.04分
- **评分范围**：60.00 - 97.50分

### 3.2 目标院校评分分布
- **平均分**：84.15分
- **中位数**：90.00分
- **标准差**：10.63分
- **评分范围**：47.19 - 97.14分

### 3.3 院校评分差距分析
- **平均差距**：22.33分
- **正向提升比例**：89.23%（大部分申请者选择更高层次院校）
- **负向下降比例**：5.11%（少数申请者选择层次较低院校）
- **最大提升**：37.14分
- **最大下降**：-45.31分

### 3.4 院校类别分布
#### 生源院校类别
- 综合类：67,496所（93.2%）
- 专业类：2,954所（4.1%）
- 艺术类：1,652所（2.3%）
- 体育类：293所（0.4%）

#### 目标院校类别
- 综合类：72,084所（99.6%）
- 艺术类：311所（0.4%）

### 3.5 评分区间分布
#### 生源院校评分区间
- 低档(0-60分)：67,050个（92.6%）
- 高档(90-100分)：2,869个（4.0%）
- 中低档(60-70分)：1,613个（2.2%）
- 中高档(80-90分)：863个（1.2%）

#### 目标院校评分区间
- 高档(90-100分)：32,969个（45.5%）
- 中高档(80-90分)：18,799个（26.0%）
- 中低档(60-70分)：8,308个（11.5%）
- 中档(70-80分)：7,268个（10.0%）
- 低档(0-60分)：5,051个（7.0%）

## 技术实现

### 4.1 关键算法
1. **分层评分算法**：根据院校层次和特殊标识进行评分计算
2. **QS排名线性插值**：在评分区间内根据排名进行线性插值
3. **关键词匹配分类**：基于优先级的院校类别分类算法

### 4.2 文件结构
```
src/feature_engineering/
└── university_score_features.py    # 主要实现文件
    ├── UniversityScoreGenerator     # 评分生成器主类
    ├── calculate_china_university_score()      # 中国院校评分
    ├── calculate_overseas_university_score()   # 海外院校评分
    ├── classify_university_category()          # 院校类别分类
    ├── generate_university_scores()            # 批量生成评分
    └── generate_score_statistics()             # 统计分析
```

### 4.3 输出文件
- **数据文件**：`data/processed/cleaned_offer_data_with_unified_scores.csv`
- **统计报告**：`data/outputs/reports/university_score_analysis_report.md`
- **使用示例**：`examples/university_scoring_example.py`

## 应用价值

### 5.1 数据标准化
- 统一中国院校层次和海外QS排名的评分体系
- 提供0-100分的标准化评分，便于比较和分析
- 消除不同评价体系间的差异

### 5.2 特征工程支撑
- 为机器学习模型提供标准化的院校背景特征
- 支持院校匹配度和竞争力分析
- 便于计算申请者的院校背景提升幅度

### 5.3 业务决策支持
- 为定校服务提供量化的院校背景评估
- 支持申请成功率预测和风险评估
- 为用户提供更精准的院校推荐

## 使用方法

### 6.1 基本使用
```python
from src.feature_engineering.university_score_features import UniversityScoreGenerator

# 初始化评分生成器
score_generator = UniversityScoreGenerator()

# 计算中国院校评分
china_score = score_generator.calculate_china_university_score(
    tier=1, is_985=True, is_211=True
)

# 计算海外院校评分
overseas_score = score_generator.calculate_overseas_university_score(qs_rank=50)

# 批量生成评分特征
df_with_scores = score_generator.generate_university_scores(df)
```

### 6.2 命令行运行
```bash
# 直接运行主程序
python -m src.feature_engineering.university_score_features

# 运行使用示例
python examples/university_scoring_example.py
```

## 总结

院校背景统一量化评分特征工程成功实现了以下目标：

1. **标准化评分体系**：建立了统一的0-100分院校评分标准
2. **全面特征覆盖**：包含评分、类别、差距、提升比例等多维特征
3. **准确分类算法**：实现了基于关键词的院校类别智能分类
4. **完整统计分析**：提供了详细的数据分布和趋势分析
5. **易用接口设计**：提供了简洁的API和完整的使用示例

该系统为留学申请数据分析提供了强有力的特征工程支撑，有助于提升定校服务的准确性和科学性。